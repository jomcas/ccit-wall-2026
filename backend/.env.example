# ============================================================================
# CCIT-Wall Backend Environment Configuration
# ============================================================================
# Copy this file to .env and update the values for your environment.
# NEVER commit the .env file to version control!
# ============================================================================

# Server Configuration
PORT=5000
NODE_ENV=development
CLIENT_URL=http://localhost:3000

# ============================================================================
# Database Configuration
# ============================================================================
MONGODB_URI=mongodb://localhost:27017/ccit-wall

# ============================================================================
# Authentication & Security Secrets
# ============================================================================
# IMPORTANT: Generate secure random values for production!
# Use: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# JWT Secret Key (REQUIRED in production)
# Minimum 32 characters recommended, 64+ for high security
# SECURITY: This MUST be set in production - app will throw error if not set
JWT_SECRET=your_jwt_secret_key_here_CHANGE_IN_PRODUCTION

# JWT Token Expiration
# Format: number + unit (s=seconds, m=minutes, h=hours, d=days)
# Examples: '15m', '1h', '24h', '7d'
# Shorter = more secure, longer = better UX
# Default: 24h
JWT_EXPIRES_IN=24h

# Bcrypt Rounds (Password Hashing Strength)
# Higher = more secure but slower (each +1 doubles time)
# Minimum: 10, Default: 12, Recommended for high security: 14
# 12 rounds ≈ 250ms, 14 rounds ≈ 1000ms on modern hardware
BCRYPT_ROUNDS=12

# ============================================================================
# Security Configuration
# ============================================================================

# HTTP Method Restriction
# Enable CORS preflight (OPTIONS method) if your frontend makes cross-origin requests
# Default: false
ENABLE_CORS=false

# ETag Header Control
# Set to 'true' to enable ETags for improved caching behavior.
# Default: false (disabled for security/consistency)
ENABLE_ETAG=false

# Content Security Policy
# Set to 'true' to enforce a strict CSP. Test carefully in development first!
# May break inline scripts or external asset loading.
# Default: false (disabled to avoid breaking existing assets)
ENABLE_CSP=false

# Trust Proxy (for reverse proxy setups like NGINX)
# Set to 'true' to read real client IP from X-Forwarded-For header
# when running behind a reverse proxy with HTTPS termination.
# Automatically enabled in production unless explicitly set to 'false'.
# Default: true in production, false in development
ENABLE_TRUST_PROXY=true

# Rate Limiting
# Configure request rate limiting to mitigate DoS attacks.
# RATE_LIMIT_WINDOW_MS: Time window in milliseconds (default: 15 minutes = 900000ms)
# RATE_LIMIT_MAX: Max requests per window per IP (default: 200)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=200

# Admin IP Allowlist
# Restrict admin routes to specific IP ranges (CIDR notation).
# Comma-separated list of CIDR ranges (e.g., "10.0.0.0/8,192.168.1.0/24").
# If not set, IP allowlist is disabled (all IPs allowed to admin routes).
# Requires authentication as admin role regardless of IP.
# Default: not set (disabled)
ADMIN_ALLOWLIST_CIDR=

# ============================================================================
# Session Management (if using cookie-based sessions)
# ============================================================================

# Session Secret (for cookie signing)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# SESSION_SECRET=your_session_secret_here

# Session Cookie Settings
# SESSION_MAX_AGE=86400000  # 24 hours in milliseconds
# SESSION_SECURE=true       # Set to true in production (requires HTTPS)

# ============================================================================
# Logging Configuration
# ============================================================================

# Debug Mode
# Set to 'true' to include stack traces in error responses (development only!)
# NEVER enable in production!
# Default: false
DEBUG=false

# Log Level (if using structured logging)
# Options: error, warn, info, debug
# LOG_LEVEL=info

# ============================================================================
# Additional Security Headers (Helmet configuration)
# ============================================================================
# These are configured in code but can be overridden via env vars if needed

# HSTS Max Age (in seconds) - only applies when HTTPS is used
# HSTS_MAX_AGE=31536000  # 1 year

# ============================================================================
# Production Checklist
# ============================================================================
# Before deploying to production, ensure:
# [ ] JWT_SECRET is set to a secure random value (64+ chars)
# [ ] NODE_ENV is set to 'production'
# [ ] DEBUG is set to 'false'
# [ ] HTTPS is configured (directly or via reverse proxy)
# [ ] ENABLE_TRUST_PROXY is correctly configured for your setup
# [ ] Rate limiting values are appropriate for your expected traffic
# [ ] Database credentials are secure and not default
# [ ] All secrets are stored securely (env vars, secrets manager)
# ============================================================================
